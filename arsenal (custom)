local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "LoginSystem"
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
screenGui.Parent = playerGui

-- Loading Screen Frame
local loadingFrame = Instance.new("Frame")
loadingFrame.Name = "LoadingFrame"
loadingFrame.Size = UDim2.new(0, 500, 0, 300)
loadingFrame.Position = UDim2.new(0.5, -250, 0.5, -150)
loadingFrame.BackgroundColor3 = Color3.fromRGB(240, 248, 255)
loadingFrame.BorderSizePixel = 0
loadingFrame.Parent = screenGui

local loadingFrameCorner = Instance.new("UICorner")
loadingFrameCorner.CornerRadius = UDim.new(0, 20)
loadingFrameCorner.Parent = loadingFrame

-- Loading Frame Gradient
local loadingGradient = Instance.new("UIGradient")
loadingGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(230, 240, 255)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(255, 250, 245)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(245, 240, 255))
}
loadingGradient.Rotation = 135
loadingGradient.Parent = loadingFrame

-- Feather Icon (decorative)
local featherIcon = Instance.new("TextLabel")
featherIcon.Name = "FeatherIcon"
featherIcon.Size = UDim2.new(0, 40, 0, 40)
featherIcon.Position = UDim2.new(0, 20, 0, 20)
featherIcon.BackgroundTransparency = 1
featherIcon.Text = "F"
featherIcon.TextColor3 = Color3.fromRGB(100, 150, 220)
featherIcon.Font = Enum.Font.FredokaOne
featherIcon.TextSize = 32
featherIcon.Parent = loadingFrame

-- Loading Title
local loadingTitle = Instance.new("TextLabel")
loadingTitle.Name = "LoadingTitle"
loadingTitle.Size = UDim2.new(1, -40, 0, 50)
loadingTitle.Position = UDim2.new(0, 20, 0, 30)
loadingTitle.BackgroundTransparency = 1
loadingTitle.Text = "FEATHER HUB"
loadingTitle.TextColor3 = Color3.fromRGB(80, 120, 180)
loadingTitle.Font = Enum.Font.GothamBold
loadingTitle.TextSize = 28
loadingTitle.TextTransparency = 0
loadingTitle.TextStrokeTransparency = 0.9
loadingTitle.TextStrokeColor3 = Color3.fromRGB(150, 180, 220)
loadingTitle.Parent = loadingFrame

-- Loading Status Text
local loadingStatus = Instance.new("TextLabel")
loadingStatus.Name = "LoadingStatus"
loadingStatus.Size = UDim2.new(1, -40, 0, 60)
loadingStatus.Position = UDim2.new(0, 20, 0, 100)
loadingStatus.BackgroundTransparency = 1
loadingStatus.Text = "Initializing..."
loadingStatus.TextColor3 = Color3.fromRGB(100, 130, 170)
loadingStatus.Font = Enum.Font.Gotham
loadingStatus.TextSize = 16
loadingStatus.TextWrapped = true
loadingStatus.Parent = loadingFrame

-- Loading Bar Background
local loadingBarBg = Instance.new("Frame")
loadingBarBg.Name = "LoadingBarBg"
loadingBarBg.Size = UDim2.new(1, -60, 0, 8)
loadingBarBg.Position = UDim2.new(0, 30, 0, 190)
loadingBarBg.BackgroundColor3 = Color3.fromRGB(200, 220, 240)
loadingBarBg.BorderSizePixel = 0
loadingBarBg.Parent = loadingFrame

local loadingBarBgCorner = Instance.new("UICorner")
loadingBarBgCorner.CornerRadius = UDim.new(0, 4)
loadingBarBgCorner.Parent = loadingBarBg

-- Loading Bar Fill
local loadingBar = Instance.new("Frame")
loadingBar.Name = "LoadingBar"
loadingBar.Size = UDim2.new(0, 0, 1, 0)
loadingBar.BackgroundColor3 = Color3.fromRGB(120, 170, 230)
loadingBar.BorderSizePixel = 0
loadingBar.Parent = loadingBarBg

local loadingBarCorner = Instance.new("UICorner")
loadingBarCorner.CornerRadius = UDim.new(0, 4)
loadingBarCorner.Parent = loadingBar

-- Loading Bar Gradient
local loadingBarGradient = Instance.new("UIGradient")
loadingBarGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(100, 150, 220)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(150, 180, 240)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(180, 150, 230))
}
loadingBarGradient.Parent = loadingBar

-- Loading Percentage
local loadingPercent = Instance.new("TextLabel")
loadingPercent.Name = "LoadingPercent"
loadingPercent.Size = UDim2.new(1, -40, 0, 30)
loadingPercent.Position = UDim2.new(0, 20, 0, 220)
loadingPercent.BackgroundTransparency = 1
loadingPercent.Text = "0%"
loadingPercent.TextColor3 = Color3.fromRGB(100, 150, 220)
loadingPercent.Font = Enum.Font.GothamBold
loadingPercent.TextSize = 20
loadingPercent.Parent = loadingFrame 

-- Login Frame
local loginFrame = Instance.new("Frame")
loginFrame.Name = "LoginFrame"
loginFrame.Size = UDim2.new(0, 450, 0, 550)
loginFrame.Position = UDim2.new(0.5, -225, 0.5, -275)
loginFrame.BackgroundTransparency = 1
loginFrame.BorderSizePixel = 0
loginFrame.Visible = false
loginFrame.Parent = screenGui

-- Login Container
local loginContainer = Instance.new("Frame")
loginContainer.Name = "LoginContainer"
loginContainer.Size = UDim2.new(1, 0, 1, 0)
loginContainer.Position = UDim2.new(0, 0, 0, 0)
loginContainer.BackgroundColor3 = Color3.fromRGB(240, 248, 255)
loginContainer.BorderSizePixel = 0
loginContainer.Parent = loginFrame

local containerCorner = Instance.new("UICorner")
containerCorner.CornerRadius = UDim.new(0, 20)
containerCorner.Parent = loginContainer

-- Container Gradient
local containerGradient = Instance.new("UIGradient")
containerGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(230, 240, 255)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(255, 250, 245)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(245, 240, 255))
}
containerGradient.Rotation = 135
containerGradient.Parent = loginContainer

-- Watermark "FEATHER HUB"
local watermark = Instance.new("TextLabel")
watermark.Name = "Watermark"
watermark.Size = UDim2.new(1, -40, 0, 50)
watermark.Position = UDim2.new(0, 20, 0, -10)
watermark.BackgroundTransparency = 1
watermark.Text = "FEATHER HUB"
watermark.TextColor3 = Color3.fromRGB(100, 150, 220)
watermark.Font = Enum.Font.SourceSansSemibold
watermark.TextSize = 32
watermark.TextXAlignment = Enum.TextXAlignment.Center
watermark.TextStrokeTransparency = 0.85
watermark.TextStrokeColor3 = Color3.fromRGB(150, 180, 220)
watermark.Parent = loginContainer

-- Profile Picture Frame
local profileFrame = Instance.new("Frame")
profileFrame.Name = "ProfileFrame"
profileFrame.Size = UDim2.new(0, 120, 0, 120)
profileFrame.Position = UDim2.new(0.5, -60, 0, 55)
profileFrame.BackgroundColor3 = Color3.fromRGB(200, 220, 240)
profileFrame.BorderSizePixel = 0
profileFrame.Parent = loginContainer

local profileCorner = Instance.new("UICorner")
profileCorner.CornerRadius = UDim.new(1, 0)
profileCorner.Parent = profileFrame

-- Profile Picture
local profileImage = Instance.new("ImageLabel")
profileImage.Name = "ProfileImage"
profileImage.Size = UDim2.new(1, -8, 1, -8)
profileImage.Position = UDim2.new(0, 4, 0, 4)
profileImage.BackgroundTransparency = 1
profileImage.Image = Players:GetUserThumbnailAsync(player.UserId, Enum.ThumbnailType.HeadShot, Enum.ThumbnailSize.Size150x150)
profileImage.Parent = profileFrame

local profileImageCorner = Instance.new("UICorner")
profileImageCorner.CornerRadius = UDim.new(1, 0)
profileImageCorner.Parent = profileImage

-- Welcome Text
local welcomeText = Instance.new("TextLabel")
welcomeText.Name = "WelcomeText"
welcomeText.Size = UDim2.new(1, -40, 0, 40)
welcomeText.Position = UDim2.new(0, 20, 0, 195)
welcomeText.BackgroundTransparency = 1
welcomeText.Text = "Glide past limits"
welcomeText.TextColor3 = Color3.fromRGB(100, 130, 170)
welcomeText.Font = Enum.Font.Gotham
welcomeText.TextSize = 18
welcomeText.TextXAlignment = Enum.TextXAlignment.Center
welcomeText.Parent = loginContainer

local usernameInput = Instance.new("TextBox")
usernameInput.Name = "UsernameInput"
usernameInput.Size = UDim2.new(1, -60, 0, 50)
usernameInput.Position = UDim2.new(0, 30, 0, 295)
usernameInput.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
usernameInput.BorderSizePixel = 0
usernameInput.PlaceholderText = "Username"
usernameInput.PlaceholderColor3 = Color3.fromRGB(150, 170, 200)
usernameInput.Text = ""
usernameInput.TextColor3 = Color3.fromRGB(80, 100, 140)
usernameInput.Font = Enum.Font.Gotham
usernameInput.TextSize = 16
usernameInput.ClearTextOnFocus = false
usernameInput.Parent = loginContainer

local usernameCorner = Instance.new("UICorner")
usernameCorner.CornerRadius = UDim.new(0, 10)
usernameCorner.Parent = usernameInput

local usernameStroke = Instance.new("UIStroke")
usernameStroke.Color = Color3.fromRGB(180, 200, 230)
usernameStroke.Thickness = 2
usernameStroke.Parent = usernameInput

-- Password Input
local passwordInput = Instance.new("TextBox")
passwordInput.Name = "PasswordInput"
passwordInput.Size = UDim2.new(1, -60, 0, 50)
passwordInput.Position = UDim2.new(0, 30, 0, 360)
passwordInput.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
passwordInput.BorderSizePixel = 0
passwordInput.PlaceholderText = "Password"
passwordInput.PlaceholderColor3 = Color3.fromRGB(150, 170, 200)
passwordInput.Text = ""
passwordInput.TextColor3 = Color3.fromRGB(80, 100, 140)
passwordInput.Font = Enum.Font.Gotham
passwordInput.TextSize = 16
passwordInput.TextXAlignment = Enum.TextXAlignment.Center
passwordInput.ClearTextOnFocus = false
passwordInput.Parent = loginContainer

local passwordCorner = Instance.new("UICorner")
passwordCorner.CornerRadius = UDim.new(0, 10)
passwordCorner.Parent = passwordInput

local passwordStroke = Instance.new("UIStroke")
passwordStroke.Color = Color3.fromRGB(180, 200, 230)
passwordStroke.Thickness = 2
passwordStroke.Parent = passwordInput

-- Login Button
local loginButton = Instance.new("TextButton")
loginButton.Name = "LoginButton"
loginButton.Size = UDim2.new(1, -60, 0, 55)
loginButton.Position = UDim2.new(0, 30, 0, 440)
loginButton.BackgroundColor3 = Color3.fromRGB(120, 170, 230)
loginButton.BorderSizePixel = 0
loginButton.Text = "LOGIN"
loginButton.TextColor3 = Color3.fromRGB(255, 255, 255)
loginButton.Font = Enum.Font.GothamBold
loginButton.TextSize = 18
loginButton.AutoButtonColor = false
loginButton.Parent = loginContainer

local loginButtonCorner = Instance.new("UICorner")
loginButtonCorner.CornerRadius = UDim.new(0, 12)
loginButtonCorner.Parent = loginButton

local loginButtonGradient = Instance.new("UIGradient")
loginButtonGradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(100, 150, 220)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(150, 180, 240)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(180, 150, 230))
}
loginButtonGradient.Parent = loginButton

-- Status Message
local statusMessage = Instance.new("TextLabel")
statusMessage.Name = "StatusMessage"
statusMessage.Size = UDim2.new(1, -60, 0, 30)
statusMessage.Position = UDim2.new(0, 30, 0, 510)
statusMessage.BackgroundTransparency = 1
statusMessage.Text = ""
statusMessage.TextColor3 = Color3.fromRGB(220, 100, 100)
statusMessage.Font = Enum.Font.Gotham
statusMessage.TextSize = 14
statusMessage.TextXAlignment = Enum.TextXAlignment.Center
statusMessage.Parent = loginContainer

-- Functions
local function makeDraggable(frame)
    local dragging
    local dragInput
    local dragStart
    local startPos

    local function update(input)
        local delta = input.Position - dragStart
        frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end

    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position

            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    frame.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            dragInput = input
        end
    end)

    game:GetService("UserInputService").InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            update(input)
        end
    end)
end

local function animateLoading()
    local loadingSteps = {
        {text = "Initializing system...", percent = 0},
        {text = "Loading assets...", percent = 15},
        {text = "Connecting to server...", percent = 30},
        {text = "Verifying credentials...", percent = 45},
        {text = "Loading user data...", percent = 60},
        {text = "Preparing interface...", percent = 75},
        {text = "Finalizing setup...", percent = 90},
        {text = "Complete!", percent = 100}
    }
    
    for i, step in ipairs(loadingSteps) do
        loadingStatus.Text = step.text
        loadingPercent.Text = step.percent .. "%"
        
        local sizeTween = TweenService:Create(loadingBar, TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Size = UDim2.new(step.percent/100, 0, 1, 0)})
        sizeTween:Play()
        
        if i < #loadingSteps then
            wait(math.random(3, 6) / 10)
        end
    end
    
    wait(0.5)
    
    local fadeOutFrame = TweenService:Create(loadingFrame, TweenInfo.new(0.5), {BackgroundTransparency = 1})
    fadeOutFrame:Play()
    
    loadingTitle.TextTransparency = 1
    loadingStatus.TextTransparency = 1
    loadingPercent.TextTransparency = 1
    loadingBarBg.BackgroundTransparency = 1
    loadingBar.BackgroundTransparency = 1
    
    wait(0.5)
    loadingFrame.Visible = false
    loginFrame.Visible = true
    
    loginFrame.Position = UDim2.new(0.5, -225, 0.5, -200)
    local slideIn = TweenService:Create(loginFrame, TweenInfo.new(0.6, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {Position = UDim2.new(0.5, -225, 0.5, -275)})
    slideIn:Play()
end

local function onLoginButtonHover()
    local tween = TweenService:Create(loginButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(140, 190, 250)})
    tween:Play()
end

local function onLoginButtonLeave()
    local tween = TweenService:Create(loginButton, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(120, 170, 230)})
    tween:Play()
end

local function onLoginButtonClick()
    local username = usernameInput.Text
    local password = passwordInput.Text
    
    if username == "" or password == "" then
        statusMessage.Text = "Please fill in all fields"
        statusMessage.TextColor3 = Color3.fromRGB(220, 100, 100)
        return
    end
    
    if username == "admin" and password == "password" then
        statusMessage.Text = "Login successful!"
        statusMessage.TextColor3 = Color3.fromRGB(100, 200, 150)
        
        wait(1)
        
        local fadeOut = TweenService:Create(loginFrame, TweenInfo.new(0.5), {BackgroundTransparency = 1})
        fadeOut:Play()
        
        wait(0.5)
        screenGui:Destroy()
        wait(1)

-- Main UI
local mainGui = Instance.new("ScreenGui")
mainGui.Name = "FeatherMain"
mainGui.ResetOnSpawn = false
mainGui.Parent = playerGui

local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 600, 0, 400)
mainFrame.Position = UDim2.new(0.5, -300, 0.5, -200)
mainFrame.BackgroundColor3 = Color3.fromRGB(240, 248, 255)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = mainGui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 20)
mainCorner.Parent = mainFrame

-- Topbar
local topBar = Instance.new("Frame")
topBar.Name = "TopBar"
topBar.Size = UDim2.new(1, 0, 0, 50)
topBar.BackgroundColor3 = Color3.fromRGB(230, 238, 250)
topBar.Parent = mainFrame

local topCorner = Instance.new("UICorner")
topCorner.CornerRadius = UDim.new(0, 20)
topCorner.Parent = topBar

-- Watermark
local title = Instance.new("TextLabel")
title.Text = "F"
title.Size = UDim2.new(1, -20, 1, 0)
title.Position = UDim2.new(0, 10, 0, 0)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(100, 150, 220)
title.Font = Enum.Font.GothamBold
title.TextSize = 22
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = topBar

-- Minimize Button (Blue Dot)
local minimizeBtn = Instance.new("TextButton")
minimizeBtn.Name = "MinimizeBtn"
minimizeBtn.Size = UDim2.new(0, 15, 0, 15)
minimizeBtn.Position = UDim2.new(1, -25, 0, 17.5)
minimizeBtn.BackgroundColor3 = Color3.fromRGB(100, 150, 220)
minimizeBtn.Text = ""
minimizeBtn.AutoButtonColor = false
minimizeBtn.Parent = topBar

local minimizeCorner = Instance.new("UICorner")
minimizeCorner.CornerRadius = UDim.new(1, 0)
minimizeCorner.Parent = minimizeBtn

local isMinimized = false
minimizeBtn.MouseButton1Click:Connect(function()
    isMinimized = not isMinimized
    mainFrame.Visible = not isMinimized
end)

-- Hotkey Toggle (RightShift)
game:GetService("UserInputService").InputBegan:Connect(function(input, gameProcessed)
    if input.KeyCode == Enum.KeyCode.RightShift and not gameProcessed then
        isMinimized = not isMinimized
        mainFrame.Visible = not isMinimized
    end
end)

-- Tab Buttons
local tabs = {"Combat", "Visuals", "Settings"}
local tabButtons = {}
for i, tabName in ipairs(tabs) do
    local button = Instance.new("TextButton")
    button.Name = tabName .. "Tab"
    button.Size = UDim2.new(0, 120, 0, 35)
    button.Position = UDim2.new(0, 20 + (i - 1) * 130, 0, 55)
    button.BackgroundColor3 = Color3.fromRGB(120, 170, 230)
    button.Text = tabName
    button.Font = Enum.Font.GothamBold
    button.TextColor3 = Color3.new(1,1,1)
    button.TextSize = 16
    button.AutoButtonColor = false
    button.Parent = mainFrame
    local c = Instance.new("UICorner")
    c.CornerRadius = UDim.new(0,8)
    c.Parent = button
    tabButtons[tabName] = button
end

-- Pages
local pages = {}
for _, tabName in ipairs(tabs) do
    local page = Instance.new("ScrollingFrame")
    page.Name = tabName .. "Page"
    page.Size = UDim2.new(1, -40, 1, -110)
    page.Position = UDim2.new(0, 20, 0, 100)
    page.BackgroundTransparency = 1
    page.Visible = false
    page.ScrollBarThickness = 4
    page.CanvasSize = UDim2.new(0,0,2,0)
    page.Parent = mainFrame
    pages[tabName] = page
end
pages["Combat"].Visible = true

-- Sample button creator
local function createSampleButton(parent, text, onClick)
    local b = Instance.new("TextButton")
    b.Size = UDim2.new(0, 250, 0, 45)
    b.BackgroundColor3 = Color3.fromRGB(200, 220, 240)
    b.Text = text
    b.TextColor3 = Color3.fromRGB(80, 100, 150)
    b.Font = Enum.Font.GothamBold
    b.TextSize = 16
    b.AutoButtonColor = false
    local corner = Instance.new("UICorner", b)
    corner.CornerRadius = UDim.new(0,10)

    b.MouseEnter:Connect(function()
        TweenService:Create(b, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(180, 200, 255)}):Play()
    end)
    b.MouseLeave:Connect(function()
        TweenService:Create(b, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(200, 220, 240)}):Play()
    end)

    if onClick then
        b.MouseButton1Click:Connect(onClick)
    end

    b.Parent = parent
    return b
end

-- Combat Features
local combatFeatures = {
    { "Aimbot E", function()
    

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer

-- ====== Settings ======
local TeamCheck = true -- true = ignore teammates
local LockEnabled = false
local LockKey = Enum.KeyCode.E
local LockFOV = 100 -- pixels radius around cursor
local Smoothness = 0.15 -- how quickly the camera moves

local MsgColor = Color3.fromRGB(120,255,230) -- mint/light blue

-- ====== Helper Functions ======
local function getClosestEnemyHeadToCursor()
    local mousePos = UserInputService:GetMouseLocation()
    local closestHead = nil
    local minDist = math.huge

    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("Humanoid") then
            local humanoid = player.Character:FindFirstChildOfClass("Humanoid")
            if humanoid.Health > 0 then
                if TeamCheck and LocalPlayer.Team and player.Team == LocalPlayer.Team then
                    continue
                end
                local head = player.Character:FindFirstChild("Head")
                if head then
                    local screenPos, onScreen = Camera:WorldToViewportPoint(head.Position)
                    if onScreen then
                        local dist = (Vector2.new(screenPos.X, screenPos.Y) - Vector2.new(mousePos.X, mousePos.Y)).Magnitude
                        if dist < minDist and dist <= LockFOV then
                            minDist = dist
                            closestHead = head
                        end
                    end
                end
            end
        end
    end
    return closestHead
end

-- Smoothly aim camera at target
local function aimAt(targetCFrame)
    local currentCFrame = Camera.CFrame
    Camera.CFrame = currentCFrame:Lerp(targetCFrame, Smoothness)
end

-- ====== Toggle Input ======
UserInputService.InputBegan:Connect(function(input, processed)
    if processed then return end
    if input.KeyCode == LockKey then
        LockEnabled = not LockEnabled
        msg.Text = LockEnabled and "Head Lock Enabled" or "Head Lock Disabled"
        task.delay(2, function()
            msg.Text = "E to toggle"
        end)
    end
end)

-- ====== Main Loop ======
RunService.RenderStepped:Connect(function()
    if LockEnabled then
        local targetHead = getClosestEnemyHeadToCursor()
        if targetHead then
            local camPos = Camera.CFrame.Position
            local targetPos = targetHead.Position
            local lookCFrame = CFrame.new(camPos, targetPos)
            aimAt(lookCFrame)
        end
    end
end)

        print("aimbot script loaded btw")
    end },
    { "Soft Aim", function()
        function getplrsname()
            for i,v in pairs(game:GetChildren()) do
                if v.ClassName == "Players" then
                    return v.Name
                end
            end
        end
        local players = getplrsname()
        local plr = game[players].LocalPlayer
        coroutine.resume(coroutine.create(function()
            while wait(1) do
                coroutine.resume(coroutine.create(function()
                    for _,v in pairs(game[players]:GetPlayers()) do
                        if v.Name ~= plr.Name and v.Character then
                            v.Character.RightUpperLeg.CanCollide = false
                            v.Character.RightUpperLeg.Transparency = 10
                            v.Character.RightUpperLeg.Size = Vector3.new(13,13,13)
                            
                            v.Character.LeftUpperLeg.CanCollide = false
                            v.Character.LeftUpperLeg.Transparency = 10
                            v.Character.LeftUpperLeg.Size = Vector3.new(13,13,13)
                            
                            v.Character.HeadHB.CanCollide = false
                            v.Character.HeadHB.Transparency = 10
                            v.Character.HeadHB.Size = Vector3.new(13,13,13)
                            
                            v.Character.HumanoidRootPart.CanCollide = false
                            v.Character.HumanoidRootPart.Transparency = 10
                            v.Character.HumanoidRootPart.Size = Vector3.new(13,13,13)
                        end
                    end
                end))
            end
        end))
    end },
    { "inf ammo", function()
        print("Inf ammo activated")
    end },
    { "Rapid Fire", function()
        print("Rapid fire activated")
    end },
}

for i, data in ipairs(combatFeatures) do
    local btn = createSampleButton(pages["Combat"], data[1], data[2])
    btn.Position = UDim2.new(0, 10, 0, (i - 1) * 55)
end

-- Color Picker Frame
local colorPickerFrame = Instance.new("Frame")
colorPickerFrame.Name = "ColorPickerFrame"
colorPickerFrame.Size = UDim2.new(0, 280, 0, 300)
colorPickerFrame.Position = UDim2.new(1, -290, 0, 10)
colorPickerFrame.BackgroundColor3 = Color3.fromRGB(220, 235, 250)
colorPickerFrame.BorderSizePixel = 0
colorPickerFrame.Visible = false
colorPickerFrame.Parent = pages["Visuals"]

local pickerCorner = Instance.new("UICorner")
pickerCorner.CornerRadius = UDim.new(0, 12)
pickerCorner.Parent = colorPickerFrame

local pickerTitle = Instance.new("TextLabel")
pickerTitle.Name = "PickerTitle"
pickerTitle.Size = UDim2.new(1, -20, 0, 30)
pickerTitle.Position = UDim2.new(0, 10, 0, 5)
pickerTitle.BackgroundTransparency = 1
pickerTitle.Text = "Color Options"
pickerTitle.TextColor3 = Color3.fromRGB(80, 100, 150)
pickerTitle.Font = Enum.Font.GothamBold
pickerTitle.TextSize = 16
pickerTitle.TextXAlignment = Enum.TextXAlignment.Left
pickerTitle.Parent = colorPickerFrame

-- Color Presets
local colorPresets = {
    {"Red", Color3.fromRGB(255, 100, 100)},
    {"Green", Color3.fromRGB(100, 255, 100)},
    {"Blue", Color3.fromRGB(100, 150, 255)},
    {"Yellow", Color3.fromRGB(255, 255, 100)},
    {"Purple", Color3.fromRGB(200, 100, 255)},
    {"Cyan", Color3.fromRGB(100, 255, 255)},
    {"Orange", Color3.fromRGB(255, 180, 100)},
    {"White", Color3.fromRGB(255, 255, 255)},
}

for i, preset in ipairs(colorPresets) do
    local colorBtn = Instance.new("TextButton")
    colorBtn.Name = preset[1]
    colorBtn.Size = UDim2.new(0, 120, 0, 30)
    colorBtn.Position = UDim2.new(0, 10 + ((i - 1) % 2) * 130, 0, 40 + math.floor((i - 1) / 2) * 35)
    colorBtn.BackgroundColor3 = preset[2]
    colorBtn.Text = preset[1]
    colorBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    colorBtn.Font = Enum.Font.GothamBold
    colorBtn.TextSize = 14
    colorBtn.AutoButtonColor = false
    colorBtn.Parent = colorPickerFrame
    
    local btnCorner = Instance.new("UICorner")
    btnCorner.CornerRadius = UDim.new(0, 8)
    btnCorner.Parent = colorBtn
    
    colorBtn.MouseButton1Click:Connect(function()
        print("Selected color: " .. preset[1])
    end)
end

-- Visual Features
local visualFeatures = {
    { "ESP E", function()
        print("ESP activated")
    end },
    { "Tracers", function()
        print("Tracers activated")
    end },
    { "Chams", function()
        print("Chams activated")
    end },
    { "Crosshair", function()
        print("Crosshair activated")
    end },
}

for i, data in ipairs(visualFeatures) do
    local btn = createSampleButton(pages["Visuals"], data[1], data[2])
    btn.Position = UDim2.new(0, 10, 0, (i - 1) * 55)
    
    -- Right-click to toggle color picker
    btn.MouseButton2Click:Connect(function()
        colorPickerFrame.Visible = not colorPickerFrame.Visible
    end)
end

-- Settings Tab
local themes = {
    {"Sky", Color3.fromRGB(150,200,255), Color3.fromRGB(230,240,255)},
    {"Blush", Color3.fromRGB(255,180,200), Color3.fromRGB(255,235,240)},
    {"Mint", Color3.fromRGB(170,255,220), Color3.fromRGB(230,255,240)},
    {"Lavender", Color3.fromRGB(200,180,255), Color3.fromRGB(240,235,255)},
    {"Sunset", Color3.fromRGB(255,190,150), Color3.fromRGB(255,230,210)},
    {"Ocean", Color3.fromRGB(130,200,250), Color3.fromRGB(220,245,255)},
    {"Rose", Color3.fromRGB(255,150,180), Color3.fromRGB(255,230,240)},
    {"Lime", Color3.fromRGB(190,255,170), Color3.fromRGB(240,255,230)},
    {"Violet", Color3.fromRGB(180,160,255), Color3.fromRGB(240,235,255)},
    {"Slate", Color3.fromRGB(170,180,190), Color3.fromRGB(220,225,230)}
}

-- Left side settings
local leftSettings = {
    {"Show FPS Counter", false},
    {"Enable Notifications", true},
    {"Auto-Save Settings", true},
    {"Hide on Tab Out", false},
    {"Low Performance Mode", false},
}

local y = 0
for i, setting in ipairs(leftSettings) do
    local settingFrame = Instance.new("Frame")
    settingFrame.Name = setting[1]
    settingFrame.Size = UDim2.new(0, 250, 0, 40)
    settingFrame.Position = UDim2.new(0, 10, 0, y)
    settingFrame.BackgroundColor3 = Color3.fromRGB(200, 220, 240)
    settingFrame.BorderSizePixel = 0
    settingFrame.Parent = pages["Settings"]
    
    local frameCorner = Instance.new("UICorner")
    frameCorner.CornerRadius = UDim.new(0, 10)
    frameCorner.Parent = settingFrame
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -50, 1, 0)
    label.Position = UDim2.new(0, 10, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = setting[1]
    label.TextColor3 = Color3.fromRGB(80, 100, 150)
    label.Font = Enum.Font.Gotham
    label.TextSize = 14
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = settingFrame
    
    local toggleBtn = Instance.new("TextButton")
    toggleBtn.Size = UDim2.new(0, 35, 0, 20)
    toggleBtn.Position = UDim2.new(1, -40, 0.5, -10)
    toggleBtn.BackgroundColor3 = setting[2] and Color3.fromRGB(100, 200, 150) or Color3.fromRGB(200, 100, 100)
    toggleBtn.Text = setting[2] and "ON" or "OFF"
    toggleBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    toggleBtn.Font = Enum.Font.GothamBold
    toggleBtn.TextSize = 10
    toggleBtn.AutoButtonColor = false
    toggleBtn.Parent = settingFrame
    
    local toggleCorner = Instance.new("UICorner")
    toggleCorner.CornerRadius = UDim.new(0, 10)
    toggleCorner.Parent = toggleBtn
    
    local isOn = setting[2]
    toggleBtn.MouseButton1Click:Connect(function()
        isOn = not isOn
        toggleBtn.Text = isOn and "ON" or "OFF"
        TweenService:Create(toggleBtn, TweenInfo.new(0.2), {
            BackgroundColor3 = isOn and Color3.fromRGB(100, 200, 150) or Color3.fromRGB(200, 100, 100)
        }):Play()
        print(setting[1] .. " is now " .. (isOn and "enabled" or "disabled"))
    end)
    
    y = y + 50
end

y = y + 20

for _, t in ipairs(themes) do
    local btn = createSampleButton(pages["Settings"], "Theme: " .. t[1])
    btn.Position = UDim2.new(0, 10, 0, y)
    btn.Size = UDim2.new(0, 250, 0, 45)
    y = y + 55
    btn.MouseButton1Click:Connect(function()
        TweenService:Create(mainFrame, TweenInfo.new(0.4), {BackgroundColor3 = t[2]}):Play()
        TweenService:Create(topBar, TweenInfo.new(0.4), {BackgroundColor3 = t[3]}):Play()
    end)
end

local uiToggle = createSampleButton(pages["Settings"], "Toggle Blur Effect")
uiToggle.Size = UDim2.new(0, 250, 0, 45)
uiToggle.Position = UDim2.new(0,10,0,y)
uiToggle.MouseButton1Click:Connect(function()
    if not game.Lighting:FindFirstChild("Blur") then
        local blur = Instance.new("BlurEffect")
        blur.Name = "Blur"
        blur.Size = 4
        blur.Parent = game.Lighting
    else
        game.Lighting:FindFirstChild("Blur"):Destroy()
    end
end)

-- Tab Switching
for tabName, button in pairs(tabButtons) do
    button.MouseButton1Click:Connect(function()
        for name, page in pairs(pages) do
            page.Visible = (name == tabName)
        end
        for _, other in pairs(tabButtons) do
            TweenService:Create(other, TweenInfo.new(0.2), {
                BackgroundColor3 = Color3.fromRGB(120,170,230)
            }):Play()
        end
        TweenService:Create(button, TweenInfo.new(0.2), {
            BackgroundColor3 = Color3.fromRGB(150,190,255)
        }):Play()
    end)
end

-- Make Draggable
makeDraggable(mainFrame)

-- Animate Entrance
mainFrame.Position = UDim2.new(0.5, -300, 0.5, -300)
TweenService:Create(mainFrame, TweenInfo.new(0.6, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
    Position = UDim2.new(0.5, -300, 0.5, -200)
}):Play()

    else
        statusMessage.Text = "Invalid credentials"
        statusMessage.TextColor3 = Color3.fromRGB(220, 100, 100)
        
        local shake = TweenService:Create(loginFrame, TweenInfo.new(0.05), {Position = UDim2.new(0.5, -215, 0.5, -275)})
        shake:Play()
        shake.Completed:Wait()
        shake = TweenService:Create(loginFrame, TweenInfo.new(0.05), {Position = UDim2.new(0.5, -235, 0.5, -275)})
        shake:Play()
        shake.Completed:Wait()
        shake = TweenService:Create(loginFrame, TweenInfo.new(0.05), {Position = UDim2.new(0.5, -225, 0.5, -275)})
        shake:Play()
    end
end

-- Make frames draggable
makeDraggable(loadingFrame)
makeDraggable(loginFrame)

-- Connect Events
loginButton.MouseEnter:Connect(onLoginButtonHover)
loginButton.MouseLeave:Connect(onLoginButtonLeave)
loginButton.MouseButton1Click:Connect(onLoginButtonClick)

-- Start Loading Animation
animateLoading()
